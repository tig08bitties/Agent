{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 5, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 18, "column": 0}, "map": {"version":3,"sources":["file:///mnt/Covenant/Cursor-Agent/metamask-web3auth/node_modules/.pnpm/%40web3auth%2Bno-modal%4010.9.0_%40babel%2Bruntime%407.28.4_%40coinbase%2Bwallet-sdk%404.3.0_%40sentry%2Bcore_c18d9eeb11a9008f1fb4e8eb02e41d1d/node_modules/%40web3auth/no-modal/dist/lib.esm/connectors/injected-evm-connector/injectedEvmConnector.js"],"sourcesContent":["import _defineProperty from '@babel/runtime/helpers/defineProperty';\nimport { normalizeWalletName } from '../../base/utils.js';\nimport { BaseEvmConnector } from '../base-evm-connector/baseEvmConnector.js';\nimport { CONNECTOR_NAMESPACES } from '../../base/chain/IChainInterface.js';\nimport { CHAIN_NAMESPACES } from '@toruslabs/base-controllers';\nimport { CONNECTOR_CATEGORY, CONNECTOR_STATUS, CONNECTOR_EVENTS } from '../../base/connector/constants.js';\nimport { log } from '../../base/loglevel.js';\nimport { WalletLoginError, Web3AuthError } from '../../base/errors/index.js';\n\nclass InjectedEvmConnector extends BaseEvmConnector {\n  constructor(options) {\n    super(options);\n    _defineProperty(this, \"connectorNamespace\", CONNECTOR_NAMESPACES.EIP155);\n    _defineProperty(this, \"currentChainNamespace\", CHAIN_NAMESPACES.EIP155);\n    _defineProperty(this, \"type\", CONNECTOR_CATEGORY.EXTERNAL);\n    _defineProperty(this, \"name\", void 0);\n    _defineProperty(this, \"isInjected\", true);\n    _defineProperty(this, \"status\", CONNECTOR_STATUS.NOT_READY);\n    _defineProperty(this, \"injectedProvider\", null);\n    this.name = options.name;\n    this.injectedProvider = options.provider;\n    this.icon = options.icon;\n  }\n  get provider() {\n    if (this.status !== CONNECTOR_STATUS.NOT_READY && this.injectedProvider) {\n      return this.injectedProvider;\n    }\n    return null;\n  }\n  set provider(_) {\n    throw new Error(\"Not implemented\");\n  }\n  async init(options) {\n    await super.init(options);\n    const chainConfig = this.coreOptions.chains.find(x => x.chainId === options.chainId);\n    super.checkInitializationRequirements({\n      chainConfig\n    });\n    this.status = CONNECTOR_STATUS.READY;\n    this.emit(CONNECTOR_EVENTS.READY, this.name);\n    try {\n      log.debug(`initializing ${this.name} injected connector`);\n      if (options.autoConnect) {\n        this.rehydrated = true;\n        const provider = await this.connect({\n          chainId: options.chainId,\n          getIdentityToken: false\n        });\n        if (!provider) {\n          this.rehydrated = false;\n          throw WalletLoginError.connectionError(\"Failed to rehydrate.\");\n        }\n      }\n    } catch (error) {\n      this.emit(CONNECTOR_EVENTS.REHYDRATION_ERROR, error);\n    }\n  }\n  async connect({\n    chainId,\n    getIdentityToken\n  }) {\n    super.checkConnectionRequirements();\n    if (!this.injectedProvider) throw WalletLoginError.connectionError(\"Injected provider is not available\");\n    const chainConfig = this.coreOptions.chains.find(x => x.chainId === chainId);\n    if (!chainConfig) throw WalletLoginError.connectionError(\"Chain config is not available\");\n    this.status = CONNECTOR_STATUS.CONNECTING;\n    this.emit(CONNECTOR_EVENTS.CONNECTING, {\n      connector: this.name\n    });\n    try {\n      await this.injectedProvider.request({\n        method: \"eth_requestAccounts\"\n      });\n      // switch chain if not connected to the right chain\n      if (this.injectedProvider.chainId !== chainConfig.chainId) {\n        try {\n          await this.switchChain(chainConfig, true);\n        } catch {\n          await this.addChain(chainConfig, true);\n          await this.switchChain(chainConfig, true);\n        }\n      }\n      this.status = CONNECTOR_STATUS.CONNECTED;\n      const accountDisconnectHandler = accounts => {\n        if (accounts.length === 0) {\n          var _this$injectedProvide;\n          this.disconnect();\n          if ((_this$injectedProvide = this.injectedProvider) !== null && _this$injectedProvide !== void 0 && _this$injectedProvide.removeListener) this.injectedProvider.removeListener(\"accountsChanged\", accountDisconnectHandler);\n        }\n      };\n      this.injectedProvider.on(\"accountsChanged\", accountDisconnectHandler);\n      let identityTokenInfo;\n      if (getIdentityToken) {\n        identityTokenInfo = await this.getIdentityToken();\n      }\n      this.emit(CONNECTOR_EVENTS.CONNECTED, {\n        connector: this.name,\n        reconnected: this.rehydrated,\n        provider: this.injectedProvider,\n        identityTokenInfo\n      });\n      return this.injectedProvider;\n    } catch (error) {\n      // ready again to be connected\n      this.status = CONNECTOR_STATUS.READY;\n      if (!this.rehydrated) this.emit(CONNECTOR_EVENTS.ERRORED, error);\n      this.rehydrated = false;\n      if (error instanceof Web3AuthError) throw error;\n      throw WalletLoginError.connectionError(`Failed to login with ${this.name} injected wallet`);\n    }\n  }\n  async disconnect(options = {\n    cleanup: false\n  }) {\n    if (!this.injectedProvider) throw WalletLoginError.connectionError(\"Injected provider is not available\");\n    await super.disconnectSession();\n    if (typeof this.injectedProvider.removeAllListeners !== \"undefined\") this.injectedProvider.removeAllListeners();\n    try {\n      await this.injectedProvider.request({\n        method: \"wallet_revokePermissions\",\n        params: [{\n          eth_accounts: {}\n        }]\n      });\n    } catch {\n      // ignore error\n    }\n    if (options.cleanup) {\n      this.status = CONNECTOR_STATUS.NOT_READY;\n      this.injectedProvider = null;\n    } else {\n      // ready to be connected again\n      this.status = CONNECTOR_STATUS.READY;\n    }\n    await super.disconnect();\n  }\n  async getUserInfo() {\n    if (this.status !== CONNECTOR_STATUS.CONNECTED) throw WalletLoginError.notConnectedError(\"Not connected with wallet, Please login/connect first\");\n    return {};\n  }\n  async addChain(chainConfig, _init = false) {\n    if (!this.injectedProvider) throw WalletLoginError.connectionError(\"Injected provider is not available\");\n    await this.injectedProvider.request({\n      method: \"wallet_addEthereumChain\",\n      params: [{\n        chainId: chainConfig.chainId,\n        chainName: chainConfig.displayName,\n        rpcUrls: [chainConfig.rpcTarget],\n        blockExplorerUrls: [chainConfig.blockExplorerUrl],\n        nativeCurrency: {\n          name: chainConfig.tickerName,\n          symbol: chainConfig.ticker,\n          decimals: chainConfig.decimals || 18\n        },\n        iconUrls: [chainConfig.logo]\n      }]\n    });\n  }\n  async switchChain(params, init = false) {\n    if (!this.injectedProvider) throw WalletLoginError.connectionError(\"Injected provider is not available\");\n    super.checkSwitchChainRequirements(params, init);\n    await this.injectedProvider.request({\n      method: \"wallet_switchEthereumChain\",\n      params: [{\n        chainId: params.chainId\n      }]\n    });\n  }\n  async enableMFA() {\n    throw new Error(\"Method Not implemented\");\n  }\n  async manageMFA() {\n    throw new Error(\"Method Not implemented\");\n  }\n}\nconst injectedEvmConnector = providerDetail => {\n  return ({\n    coreOptions\n  }) => {\n    return new InjectedEvmConnector({\n      name: normalizeWalletName(providerDetail.info.name),\n      provider: providerDetail.provider,\n      icon: providerDetail.info.icon,\n      coreOptions\n    });\n  };\n};\n\nexport { InjectedEvmConnector, injectedEvmConnector };\n"],"names":[],"mappings":"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","ignoreList":[0],"debugId":null}}]
}